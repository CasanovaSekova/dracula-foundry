@use "../variables" as *;

:root {
	scrollbar-width: thin;
	scrollbar-color: var(--color-dracula-tertiary) var(--color-dracula-tertiary);
}

// Scrollbar
::-webkit-scrollbar {
	@include thinBorder(transparent);
	background: transparent;
	width: 6px;
	height: 6px;

	&-track {
		box-shadow: 0 0 6px $glowColor inset;
		border-radius: 4px;
	}

	&-thumb {
		outline: none;
		border-radius: 0;
		background: linear-gradient(
			0deg,
			$accentTertiary 0%,
			$accentSecondary 100%
		);
	}
}

/* Global Text Styles */
/* Headings */
h1,
h2,
h3,
h3,
footer {
	border-width: 1px;
	border-color: $border-color;

	&.nue {
		border-color: $border-color;
	}
}

h4 {
	color: $text-color;
}

hr {
	border-top: 1px solid $accent;
	border-bottom: 1px solid transparent;
}

/* Paragraph */
p {
	color: $text-color;
}

/* Anchor */
a {
	&.content-link,
	&.entity-link,
	&.inline-roll {
		color: $text-color-secondary;
		background: transparent;
		border: 1px solid $accentSecondary;
	}

	&.content-link:hover,
	&.entity-link:hover,
	&.inline-roll:hover {
		text-shadow: 0 0 4px $accentSecondary;
		box-shadow: none;
	}

	&.content-link i,
	&.entity-link i,
	&.inline-roll i {
		color: $disabled;
	}
}

/* Most input forms */
input {
	&:focus {
		box-shadow: none;
	}

	&[type="text"],
	&[type="number"],
	&[type="password"],
	&[type="date"],
	&[type="time"],
	&[type="text"].color,
	&[type="color"][data-edit] {
		@include thinBorder($accent);
		color: $text-color-secondary;
		background: $border-color;
		box-shadow: none;
		transition: 0.3s ease-in-out all;
	}

	&[type="text"]:focus,
	&[type="number"]:focus,
	&[type="password"]:focus,
	&[type="date"]:focus,
	&[type="time"]:focus {
		background: $border-color;
		border-width: 2px;
		box-shadow: none;
	}

	&[type="range"] + .range-value {
		@include thinBorder($accent);
		color: $text-color-secondary;
		background: $border-color;
		box-shadow: none;
		margin: 2px;
		transition: 0.3s ease-in-out all;
	}

	&[type="range"]::-webkit-slider-thumb {
		background: linear-gradient(
			$gradientDegree,
			$accentTertiary,
			$accentSecondary
		);
		height: 12px;
		width: 12px;
		cursor: pointer;
		box-shadow: none;
	}

	&[type="checkbox"] {
		background: $accent;
		color: $text-color;
	}

	&[type="radio"] {
		background: accent;
		color: $text-color;
	}

	&[type="color"][data-edit][data-edit],
	&[type="color"i] {
		appearance: auto;
		background-color: transparent;
		color: $text-color;
		border-color: $bg_window_content;
	}

	&:placeholder {
		color: $disabled;
		text-shadow: 0 0 10px $glowColor;
	}
}

/* Tables (General sense, not specific to rolltables) */
table {
	border-top: 1px solid transparent;
	border-bottom: 1px solid transparent;
	text-shadow: none;
	font-size: 12px;

	thead {
		background: $border-color;
		border-bottom: none;
	}
}

/* Select (drop-down boxes) */
select {
	color: $text-color-secondary;
	background: $black;
	border: 1px solid $accent;
	border-radius: 2px;
	box-shadow: none;
	margin: 2px;
	transition: 0.3s ease-in-out all;

	&:focus {
		border-width: 2px;
		box-shadow: none;
	}
}

/* Forms */
form {
	.hint,
	.notes {
		color: $text-color;
	}

	&-group {
		.form-fields {
			border: 1px solid $border-color;
			border-radius: 2px;
			background: $bg_window_content;
			color: $text-color-secondary;

			&:focus {
				border-width: 2px;
			}
		}

		.form-fields > *:last-child {
			border: 1px solid $border-color;
			border-radius: 2px;
			background: $bg_window_content;
			color: $text-color-secondary;
		}
	}
}

fieldset {
	border: 1px solid transparent;
}

textarea {
	border: 1px solid $border-color-secondary;
	background: $bg_content;
	color: $text-color;

	&:focus {
		border-width: 2px;
		box-shadow: none;
	}
}

/* Buttons */
button,
form button {
	@include thinBorder($accent);
	@include lightToDark($bg_content);
	@include heavyShadow;

	color: $text-color;
	border-radius: 1px;
	margin: 0 0 0.125rem 0;

	&:hover {
		@include hoverRaise;
	}
}

/* Colour Pickers */
.picker_wrapper {
	background: $bg_content;
	color: $text-color;

	.button {
		background: $bg_content;
		border: 1px solid $blackSecondary;
		color: $text-color;
	}
}

/* Window pop-up buttons  
Separated if I want these buttons to be styled differently */
.dialog .dialog-buttons button {
	@include thinBorder($accent);
	@include lightToDark($bg_content);
	@include heavyShadow;
	font-size: 14px;

	&.default {
		@include thinBorder($accent);
		@include lightToDark($bg_content);
		@include heavyShadow;
		font-size: 14px;
	}

	&:focus,
	&:hover {
		@include hoverRaise;
		box-shadow: none;
	}
}

.app {
	color: $text-color-secondary;
	background: $bg_content;
}

.sheet {
	nav.sheet-tabs {
		border-top: none;
		border-bottom: none;
	}

	header.sheet-header img {
		border: none;
	}
}

// Window Styles
.window-app {
	backdrop-filter: $filter-backdrop;
	border-bottom-left-radius: 3px;
	border-bottom-right-radius: 3px;

	.window-content {
		background: $bg_content;
		color: $text-color;
		border-top-left-radius: 0px;
		border-top-right-radius: 0px;
		border-bottom-left-radius: 3px;
		border-bottom-right-radius: 3px;

		> * {
			background: transparent;
			color: $text-color;
		}
	}

	.window-header {
		border-top-left-radius: 6px;
		border-top-right-radius: 6px;
		border-bottom-left-radius: 0px;
		border-bottom-right-radius: 0px;
		background: $bg_content;
		border: 1px solid transparent;
	}

	.dialogue {
		background: $bg_content;
		border-radius: 6px;
		border: none;
		text-shadow: 0 0 10px rgba(0 0 0 / 50%);
	}
}

// Navigation (Top bar)
#navigation {
	#nav-toggle {
		&:hover {
			text-shadow: 0 0 4px $glowColor;
		}
	}

	#scene-list {
		.nav-item {
			border: 1px solid $border-color;
			border-radius: 1px;
			background: $bg_content;
		}

		.scene {
			&.gm {
				@include thinBorder($accent);
				background: $bg_content;
			}

			&.view,
			&.view.gm {
				@include gradientBorder($accentSecondary, $accentTertiary);
				background: $bg_content;
				box-shadow: inset 0 0 0.1px 0.25px $accentTertiary;
			}

			&-context {
				@include thinBorder($accent);
				background: $bg_content;
			}
		}
	}
}

// Controls/Tools Sidebar (Left Sidebar)
#controls {
	.control-tool {
		@include heavyShadow;
	}

	ol {
		.scene-control {
			@include heavyShadow;
			@include gradientBorder($accentSecondary, $accentTertiary);
			background: $bg_content;
			filter: opacity(75%);

			&.active {
				@include heavyShadow;
				@include gradientBorder($accentSecondary, $accentTertiary);
				border-radius: 1px;
				filter: none;
			}

			&:hover {
				@include heavyShadow;
				@include gradientBorder($accentSecondary, $accentTertiary);
				border-radius: 1px;
				filter: none;
			}
		}

		&.sub-controls {
			.control-tool {
				@include heavyShadow;
				@include gradientBorder($accentSecondary, $accentTertiary);
				filter: opacity(75%);
				background: $bg_content;

				&.toggle {
					@include heavyShadow;
					@include gradientBorder($accent, $highlight);

					&.active {
						@include toolsShadow;
						@include gradientBorder($accent, $highlight);
						background: linear-gradient(
							$gradientDegree,
							$accent 0%,
							$highlight 100%
						);
						--shadow-color: 171deg 61% 33%;
						filter: none;
					}

					&:hover {
						@include toolsShadow;
						@include gradientBorder($accent, $highlight);
						background: linear-gradient(
							$gradientDegree,
							$accent 0%,
							$highlight 100%
						);
						--shadow-color: 171deg 61% 33%;
						filter: none;
					}
				}

				&.active {
					@include heavyShadow;
					@include gradientBorder($accentSecondary, $accentTertiary);
					filter: none;
				}

				&:hover {
					@include heavyShadow;
					@include gradientBorder($accentSecondary, $accentTertiary);
					filter: none;
				}
			}
		}
	}
}

/* Hotbar (Bottom Center) */
#hotbar {
	#macro-list {
		@include thinBorder($border-color);
		border-radius: 1px;

		&.inactive {
			/* Replace later. */
			box-shadow: 0 0 5px var(--color-dracula-glow) inset;
		}
	}

	#hotbar {
		border-radius: 1px;

		&-directory-controls,
		&-page-controls {
			background: linear-gradient(
				180deg,
				hsla(235, 14%, 15%, 90%) 0%,
				hsla(230, 15%, 15%, 75%) 50%,
				hsla(230, 15%, 15%, 50%) 100%
			);
			--shadow-color: 0deg 0% 48%;
			text-shadow: 0 0.1px 0.2px hsl(var(--shadow-color) / 0),
				0 0 0.3px hsl(var(--shadow-color) / 0.18),
				0 0 0.6px hsl(var(--shadow-color) / 0.35),
				0 0 1.2px hsl(var(--shadow-color) / 0.52),
				0 0 2px hsl(var(--shadow-color) / 0.7);
		}
	}

	/* Individual macro boxes */
	.macro {
		border: 1px solid $bg_content;
		border-radius: 1px;
		background: linear-gradient(
				180deg,
				hsla(235, 14%, 15%, 90%) 0%,
				hsla(230, 15%, 15%, 75%) 50%,
				hsla(230, 15%, 15%, 50%) 100%
			);
		backdrop-filter: $filter-backdrop;

		/* Macro boxes containing items */
		&.active {
			@include gradientBorder($accent, $disabled);
			&:hover {
				@include borderExpand($accent);
			}
		}

		/* Empty macro boxes */
		&.inactive {
			opacity: 75%;
			&:hover {
				@include borderExpand($bg_content);
				opacity: 100%;
			}
		}

		.macro-key {
			@include heavyShadow;
			color: $text-color;
			background: $border-color;
		}
	}

	.bar-controls {
		--shadow-color: 0deg 0% 48%;
		background: $border-color;
		border-radius: 1px;

		text-shadow: 0 0.1px 0.2px hsl(var(--shadow-color) / 0),
			0 0 0.3px hsl(var(--shadow-color) / 0.18),
			0 0 0.6px hsl(var(--shadow-color) / 0.35),
			0 0 1.2px hsl(var(--shadow-color) / 0.52),
			0 0 2px hsl(var(--shadow-color) / 0.7);
	}
}

/* Player List (Bottom Left) */
#players {
	h3 {
		border-bottom: 1px solid $border-color;
	}
}

/* Main Sidebar (Right) */
#sidebar {
	background: linear-gradient(
		0deg,
		hsla(235, 14%, 15%, 0.9) 0%,
		hsla(230, 15%, 15%, 75%) 75%,
		hsla(230, 15%, 15%, 70%) 100%
	);
	backdrop-filter: $filter-backdrop;
	border: 1px solid transparent;
	--shadow-color: 232deg 22% 2%;
	box-shadow: -0.1px 0px 0.1px hsl(var(--shadow-color) / 0.14),
		-0.9px 0.1px 1px -0.3px hsl(var(--shadow-color) / 0.14),
		-1.8px 0.1px 2.1px -0.7px hsl(var(--shadow-color) / 0.15),
		-2.9px 0.2px 3.4px -1px hsl(var(--shadow-color) / 0.15),
		-4.6px 0.3px 5.3px -1.3px hsl(var(--shadow-color) / 0.15),
		-7.1px 0.4px 8.2px -1.6px hsl(var(--shadow-color) / 0.16),
		-10.7px 0.6px 12.4px -2px hsl(var(--shadow-color) / 0.16),
		-15.7px 0.9px 18.2px -2.3px hsl(var(--shadow-color) / 0.16);

	/* Sidebar Navigation Tabs */
	&-tabs {
		border: none;
	}

	&-tabs > .item.active {
		color: $text-color;
		background: transparent;
		box-shadow: none;
		border: 2px solid transparent;
		border-bottom: 2px solid $accent;
		text-shadow: 0 0 0 4px $accent;

		&:hover {
			text-shadow: 0 0 8px $glowColor;
		}
	}

	&-tabs > .item {
		color: $text-color-secondary;
		background: transparent;
		border: none;
		text-shadow: 0 0 2px $shadowColor;

		&:hover {
			color: $text-color;
			text-shadow: 0 0 2px $glowColor;
		}
	}
}

/* Directory Navigation */
.directory {
	.action-buttons button {
		background: $bg_content;
	}

	.directory-list {
		.directory-item {
			&.active,
			&.context {
				border-color: $border-color;
			}
		}
	}

	.directory-header .header-search input {
		@include thinBorder($accent);
		background: $bg_content;
		color: $text-color-secondary;
		box-shadow: none;
		margin: 2px;
		transition: 0.3s ease-in-out all;

		&:focus {
			border-width: 2px;
		}
	}
}

/* Sidebar Chat Log */
#chat-log {
	@include thinBorder(transparent);
	background: transparent;
	border-radius: 2px;
}
// Chat Cards (will restyle most aspects)
.chat-message {
	@include gradientBorder($accent, $accentSecondary);
	background: $bg_content;
	color: $text-color-secondary;
	transition: max-height 0.3s ease-in-out;

	&.whisper {
		@include gradientBorder($accent, $highlight);
		background: $bg_content;
		color: $text-color-secondary;
		transition: max-height 0.3s ease-in-out;
	}

	&.blind {
		@include gradientBorder($accent, $accentTertiary);
		background: $bg_content;
		color: $text-color-secondary;
		transition: max-height 0.3s ease-in-out;
	}

	&.emote {
		@include gradientBorder($accent, $yellow);
		background: $bg_content;
		color: $text-color-secondary;
		transition: max-height 0.3s ease-in-out;
	}

	.message-header,
	.message-metadata {
		.message-sender {
			color: $text-color-secondary;
			font-size: inherit;
		}
		color: $text-color-secondary;
		text-shadow: none;
	}

	.table-draw .table-description {
		border-top: 1px solid $whiteLight;
		color: $disabled;
	}

	// Most values related to dice result boxes
	.dice-roll {
		margin: 2px;
		.dice-formula {
			@include heavyShadow;
			background: $border-color;
			border: 1px solid $accent;
			border-radius: 1px;

			&:hover {
				@include hoverRaise;
				cursor: pointer;
			}
		}

		// Dice total mini-boxes
		.dice-total {
			@include heavyShadow;
			border: 1px solid $accent;
			background: $border-color;
			font-size: 14px;
			border-radius: 1px;

			&:hover {
				@include hoverRaise;
				cursor: pointer;
			}

			&.success {
				@include gradientBorder($success, $greenSecondary);
				color: inherit;
				background: $bg_content;
			}

			&.critical {
				@include gradientText($success, $greenSecondary);
			}

			&.failure {
				@include gradientBorder($red, $failure);
				color: inherit;
				background: $bg_content;
			}

			&.fumble {
				@include gradientText($failure, $red);
			}
		}

		// Detailed attack formula + damage buttons
		.dice-result {
			.dice-tooltip .dice {
				.part-header.flexrow {
					@include gradientBorder($accent, $disabled);
					background: $border-color;

					.part-total {
						border: none;
						background: transparent;
						font-size: 12px;
						margin-right: 5px;
						margin-top: 1px;
					}

					.part-formula {
						margin-left: 6px;
					}

					.part-flavor {
						color: inherit;
						background: none;
						border: 1px solid transparent;
					}
				}

				&-rolls {
					margin: 0.3em;
					padding-top: 2px;
				}

				.roll {
					@include gradientBorder($purple, $disabled);
					@include heavyShadow;
					color: $text-color;
					background: transparent;
					font-size: 14px;
					margin: 2px;

					&:hover {
						@include hoverRaise;
					}

					&.failure,
					&.min {
						@include gradientBorder($failure, $red);
						@include gradientText($failure, $red);
						filter: none;
					}

					&.max,
					&.success {
						@include gradientBorder($success, $green);
						@include gradientText($success, $green);
						filter: none;
					}

					.dice-result {
						color: $text-color-secondary;
					}
				}
			}
		}
	}

	.message-content {
		color: $text-color-secondary;
		border: none;
		margin: 2px;

		.form-group.sheet.actor .items-list {
			color: $text-color-secondary;
			border: none;
			margin: 1px;
		}
	}
}

// Chat Menu
#chat-controls {
	background: none;

	.roll-type-select {
		@include lightToDark($bg_content);
		@include thinBorder(transparent);
		border-radius: 2px;
		padding: 2px;
	}
}

/* Input area (form) for chat menu */
#chat-form textarea {
	@include thinBorder($accent);
	color: $text-color-secondary;
	background: transparent;

	&:focus {
		border-width: 2px;
	}
}

// Combat Tracker
#combat {
	#combat-round {
		border-bottom: 2px solid transparent;
	}

	li.combatant {
		&.active {
			background: $bg_content;
		}
	}

	#combat-controls {
		border-top: 2px solid $border-color;
	}
}

// Default text editor for journals
.tinymce .mce-content-body {
	color: $text-color-secondary;
}

// Roll tables
.roll-table-config ol.table-results {
	.table-header {
		border: none;
	}

	.table-result .result-controls .lock-result {
		color: $text-color-secondary;
	}

	.table-result.drawn .lock-result {
		color: $disabled;
	}
}

// Sound Menu
#playlists {
	.sound-control {
		&[data-action="sound-stop"],
		&[data-action="playlist-stop"] {
			color: $accentTertiary;
		}
	}
}

// Compendium Submenu
.compendium.directory .directory-list .directory-item {
	border-top: none;
	border-bottom: 1px solid transparent;
}

/* Foundry Settings */
#client-settings {
	&.app.window-app.form #config-tabs .settings-list h2.module-header span,
	section.content h2.module-header {
		color: hsla(60, 30%, 100%, 80%);
		border-bottom: 1px solid transparent;
	}

	nav.tabs {
		border-bottom: 1px solid $border-color;

		&:focus {
			text-shadow: 0 0 4px $accentSecondary;
		}
	}

	&#config-tabs div.tab[data-tab="modules"] #searchField #searchInput {
		@include gradientBorder($accent, $highlight);
		margin: 2px;

		&:focus {
			border-width: 2px;
			box-shadow: none;
		}
	}
}

#settings {
	h2 {
		border-bottom: none;
		border-top: none;
		color: $text-color-secondary;
		background: none;
	}
}

#permissions-config {
	header.table-header {
		background: none;
		border: 1px solid $border-color-secondary;
		border-radius: 2px;
		padding-bottom: 4px;
	}

	li.permission {
		border-bottom: 1px solid $border-color-secondary;
	}

	p {
		&.hint {
			color: $text-color-secondary;
		}
	}

	.hint {
		color: $disabled;
	}
}

/* Module Management Menu */
#module-management {
	.package-list {
		.package {
			border-bottom: 1px solid $border-color-secondary;

			&-description,
			&-metadata,
			&-title {
				color: $text-color;
			}
		}

		/* WIP doesn't seem to affect anything */
		input[type="checkbox"] {
			background: $border-color-secondary;
			color: $accent;
		}
	}
}

nav.list-filters a.filter {
	color: $disabled;
	border-bottom: 1px solid $disabled;
	text-shadow: none;
	transition: all 0.2s ease-in-out;

	&:hover {
		color: $white;
		border-bottom: 1px solid $disabled;
		box-shadow: none;
		transition: color 0.2s ease-in-out;
	}

	&.active {
		color: $accentSecondary;
		border-bottom: 1px solid $accentSecondary;
		box-shadow: none;
		transition: all 0.2s ease-in-out;
	}
}

/* Keybindings Menu */
#keybindings {
	.filters h3 {
		border-bottom: 1px solid transparent;
	}

	.action {
		border-bottom: 1px solid transparent;
	}

	.category {
		.category-header {
			border-bottom: 1px solid transparent;
		}
	}
}
