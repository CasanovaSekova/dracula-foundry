@use "../variables" as *;

/* Global stylings */

body {
    :root {
        // Link color values with init.js
        --color-dracula-accent: $accent;
        --color-dracula-secondary: $accentSecondary;
        --color-dracula-tertiary: $accentTertiary;
        --color-dracula-text-primary: $text-color;
        --color-dracula-text-secondary: $text-color-secondary;
        --color-dracula-text-tertiary: $disabled;
        --color-dracula-text-inactive: $disabled;
        // Scrollbar
        scrollbar-width: thin;
        scrollbar-color: $accentTertiary $accentTertiary;
    }

    h1,
    h2,
    h3,
    h3.nue,
    footer.nue {
        border-width: 1px;
        border-color: $accent;
    }

    h4 {
        color: $text-color;
    }

    hr {
        border-top: 1px solid $accent;
        border-bottom: 1px solid transparent;
    }

    .app {
        color: $text-color-secondary;
    }

    .editor {
        &-edit {
            color: $text-color;
            background: $bg_window_content;
            border: 1px solid $border-color;
            box-shadow: 0 0 4px $glowColor;
        }
    }

    .sheet {
        nav.sheet-tabs {
            border-top: none;
            border-bottom: none;
        }

        header.sheet-header img {
            border: none;
        }
    }

    fieldset {
        border: 1px solid transparent;
    }

    textarea {
        border: 1px solid $border-color-secondary;
        background: $bg_content;
        color: $text-color;
        margin: 2px;

        &:focus {
            border-width: 2px;
            box-shadow: none;
        }
    }

    // Main window wrappers
    .window-app {
        backdrop-filter: blur(6px);

        .window-content {
            background: $bg_content;
            color: $text-color;

            > * {
                background: transparent;
                color: $text-color;
            }
        }

        .window-header {
            background: $bg_content;
            border-radius: 6px;
            border: 1px solid transparent;
        }

        .dialogue {
            background: $bg_content;
            border-radius: 6px;
            border: none;
            text-shadow: 0 0 10px rgba(0 0 0 / 50%);
        }
    }
    // Left sidebar menu
    #controls {
        .scene-control {
            @include gradientBorder($accent, $highlight);
            @include heavyShadow;
            background: $bg_content;
        }
        ol.sub-controls {
        //    @include gradientBorder($accent, $highlight);
            @include heavyShadow;
        //    background: $bg_content;
        }
    }

    // The right sidebar itself
    #sidebar {
        background: linear-gradient(
            0deg,
            hsla(235, 14%, 15%, 0.9) 0%,
            hsla(230, 15%, 15%, 75%) 75%,
            hsla(230, 15%, 15%, 70%) 100%
        );
        border: 2px solid transparent;
        backdrop-filter: blur(6px);

        &-tabs {
            border-bottom: 2px solid $disabled;
        }

        &-tabs > .item.active {
            color: $accent;
            background: transparent;
            backdrop-filter: none;
            box-shadow: none;
            border-bottom: 2px solid $accent;
            &:hover {
                color: $accentTertiary;
                border-bottom: 2px solid $accentTertiary;
                text-shadow: 0 0 2px $glowColor;
            }
        }

        &-tabs > .item {
            color: $disabled;
            background: transparent;
            backdrop-filter: none;
            text-shadow: 0 0 4px $disabled;
            &:hover {
                color: $accentTertiary;
                border-bottom: 2px solid $accentTertiary;
                text-shadow: 0 0 2px $glowColor;
            }
        }
    }

    // Scrollbar
    ::-webkit-scrollbar {
        @include thinBorder(transparent);
        background: transparent;
        width: 6px;
        height: 6px;

        &-track {
            box-shadow: 0 0 6px $glowColor inset;
            border-radius: 4;
        }

        &-thumb {
            outline: none;
            border-radius: 0;
            background: linear-gradient(0deg, $accentTertiary 0%, $accentSecondary 100%);
        }
    }

    button,
    form button {
        @include thinBorder($accent);
        @include lightToDark($bg_content);
        @include heavyShadow;
        font-size: 14px;

        &:hover {
            @include hoverRaise;
        }
    }

    // Separate from the above if I want pop-ups to have different colours
    .dialog .dialog-buttons button {
        @include thinBorder($accent);
        @include lightToDark($bg_content);
        @include heavyShadow;
        font-size: 14px;

        &.default {
            @include thinBorder($accent);
            @include lightToDark($bg_content);
            @include heavyShadow;
            font-size: 14px;
            margin: 2px;
        }

        &:focus,
        &:hover {
            @include hoverRaise;
            box-shadow: none;
        }
    }

    input {
        margin: 2px;

        &:focus {
            box-shadow: none;
        }

        &[type="text"],
        &[type="number"],
        &[type="password"],
        &[type="date"],
        &[type="time"],
        &[type="text"].color,
        &[type="color"][data-edit] {
            @include thinBorder($accent);
            color: $text-color-secondary;
            background: $border-color;
            box-shadow: none;
            transition: 0.3s ease-in-out all;
        }

        &[type="text"]:focus,
        &[type="number"]:focus,
        &[type="password"]:focus,
        &[type="date"]:focus,
        &[type="time"]:focus {
            background: $border-color;
            border-width: 2px;
            box-shadow: none;
        }

        &[type="range"] + .range-value {
            @include thinBorder($accent);
            color: $text-color-secondary;
            background: $border-color;
            box-shadow: none;
            margin: 2px;
            transition: 0.3s ease-in-out all;
        }

        &[type="range"]::-webkit-slider-thumb {
            @include gradientBorder($accentSecondary, $accentTertiary);
            height: 12px;
            width: 12px;
            cursor: pointer;
            box-shadow: none;
        }

        &[type="checkbox"] {
            background: $accent;
            color: $text-color;
        }

        &[type="radio"] {
            background: accent;
            color: $text-color;
        }

        &[type="color"][data-edit][data-edit] {
            appearance: auto;
            background-color: transparent;
            color: $text-color;
            border-color: $bg_window_content;
        }

        &:placeholder {
            color: $disabled;
            text-shadow: 0 0 10px $glowColor;
        }
    }

    a {
        &.content-link,
        &.entity-link,
        &.inline-roll {
            color: $text-color-secondary;
            background: transparent;
            border: 1px solid $accentSecondary;
        }

        &.content-link:hover,
        &.entity-link:hover,
        &.inline-roll:hover {
            text-shadow: 0 0 4px $accentSecondary;
            box-shadow: none;
        }

        &.content-link i,
        &.entity-link i,
        &.inline-roll i {
            color: $disabled;
        }
    }

    table {
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        text-shadow: none;
        font-size: 12px;

        thead {
            background: $border-color;
            border-bottom: none;
        }
    }

    // Select aka drop-down boxes
    select {
        color: $text-color-secondary;
        background: $black;
        border: 1px solid $accent;
        border-radius: 2px;
        box-shadow: none;
        margin: 2px;
        transition: 0.3s ease-in-out all;

        &:focus {
            border-width: 2px;
            box-shadow: none;
        }
    }

    form {
        .hint,
        .notes {
            color: $text-color;
        }

        .form-group .form-fields {
            border: 1px solid transparent;
            border-radius: 2px;
            background: transparent;
            color: $text-color-secondary;
        }

        &:focus {
            border-width: 2px;
        }
    }

    // For color pickers
    .picker_wrapper {
        background: $bg_content;
        color: $text-color;

        .button {
            background: $bg_content;
            border: 1px solid $blackSecondary;
            color: $text-color;
        }
    }

    // Default text editor for journals
    .tinymce .mce-content-body {
        color: $text-color-secondary;
    }

    .directory {
        .action-buttons button {
            background: $bg_content;
        }

        .directory-header .header-search input {
            @include thinBorder($accent);
            background: $bg_content;
            color: $text-color-secondary;
            box-shadow: none;
            margin: 2px;
            transition: 0.3s ease-in-out all;

            &:focus {
                border-width: 2px;
            }
        }
    }

    #module-management {
        .package-list {
            .package {
                border-bottom: 1px solid $border-color-secondary;

                &-description,
                &-metadata,
                &-title {
                    color: $text-color;
                }
            }

            // WIP doesn't seem to affect anything
            input[type="checkbox"] {
                background: $border-color-secondary;
                color: $accent;
            }
        }
    }

    // Compendium Menu
    .compendium.directory .directory-list .directory-item {
        border-top: none;
        border-bottom: 1px solid transparent;
    }

    // Sound Menu
    #playlists .sound-control {
        &[data-action="sound-stop"],
        &[data-action="playlist-stop"] {
            color: $accentTertiary;
        }
    }

    // Chat Menu
    #chat-controls {
        background: none;

        .roll-type-select {
            @include lightToDark($bg_content);
            @include thinBorder(transparent);
            border-radius: 2px;
            padding: 2px;
        }
    }

    #chat-log {
        @include thinBorder(transparent);
        background: transparent;
        border-radius: 2px;
    }

    // Restyles most chat cards
    .chat-message {
        @include gradientBorder($accent, $accentSecondary);
        background: $bg_content;
        color: $text-color-secondary;
        transition: max-height 0.3s ease-in-out;

        &.whisper {
            @include gradientBorder($accent, $highlight);
            background: $bg_content;
            color: $text-color-secondary;
            transition: max-height 0.3s ease-in-out;
        }

        &.blind {
            @include gradientBorder($accent, $accentTertiary);
            background: $bg_content;
            color: $text-color-secondary;
            transition: max-height 0.3s ease-in-out;
        }

        .message-header,
        .message-metadata {
            color: $text-color-secondary;
            text-shadow: none;
        }

        .table-draw .table-description {
            border-top: 1px solid $whiteLight;
            color: $disabled;
        }

        // Most values related to dice result boxes
        .dice-roll {
            .dice-formula {
                @include heavyShadow;
                background: $border-color;
                border: 1px solid $accent;
                border-radius: 1px;

                &:hover {
                    @include hoverRaise;
                    cursor: pointer;
                }
            }

            .dice-total {
                @include heavyShadow;
                @include gradientBorder($accent, $border-color-secondary);
                background: $border-color;
                font-size: 14px;

                &:hover {
                    @include hoverRaise;
                    cursor: pointer;
                }

                &.critical {
                    @include gradientText($success, $greenSecondary);
                }

                &.fumble {
                    @include gradientText($red, $failure);
                }
            }

            // Detailed attack formula + damage buttons
            .dice-result {
                .dice-tooltip .dice {
                    .part-header.flexrow {
                        @include gradientBorder($accent, $disabled);
                        background: $border-color;
                        margin: 2px;

                        .part-total {
                            border: none;
                            background: transparent;
                            font-size: 12px;
                            line-height: 25px;
                            margin-right: 5px;
                            margin-top: 1px;
                        }

                        .part-formula {
                            margin-left: 6px;
                        }

                        .part-flavor {
                            color: inherit;
                            background: none;
                            border: 1px solid transparent;
                            line-height: 25px;
                        }
                    }

                    &-rolls {
                        padding-top: 2px;
                    }

                    .roll {
                        @include gradientBorder($purple, $disabled);
                        @include heavyShadow;
                        color: $text-color;
                        background: transparent;
                        font-size: 14px;
                        margin: 2px;

                        &:hover {
                            @include hoverRaise;
                        }

                        &.failure,
                        &.min {
                            @include gradientBorder($failure, $red);
                            @include gradientText($failure, $red);
                            filter: none;
                        }

                        &.max,
                        &.success {
                            @include gradientBorder($success, $green);
                            @include gradientText($success, $green);
                            filter: none;
                        }

                        .dice-result {
                            color: $text-color-secondary;
                        }
                    }
                }
            }
        }

        .message-content {
            color: $text-color-secondary;
            border: none;
            margin: 2px;

            .form-group.sheet.actor .items-list {
                color: $text-color-secondary;
                border: none;
                margin: 1px;
            }
        }
    }

    #chat-form textarea {
        @include thinBorder($accent);
        color: $text-color-secondary;
        background: transparent;
        margin: 2px;

        &:focus {
            border-width: 2px;
        }
    }

    #client-settings {
        &.app.window-app.form #config-tabs .settings-list h2.module-header span,
        section.content h2.module-header {
            color: hsla(60, 30%, 100%, 80%);
            border-bottom: 1px solid transparent;
        }

        nav.tabs {
            border-bottom: 1px solid $border-color;

            &:focus {
                text-shadow: 0 0 4px $accentSecondary;
            }
        }

        &#config-tabs div.tab[data-tab="modules"] #searchField #searchInput {
            @include gradientBorder($accent, $highlight);
            margin: 2px;

            &:focus {
                border-width: 2px;
                box-shadow: none;
            }
        }
    }

    #settings {
        h2 {
            border-bottom: none;
            border-top: none;
            color: $text-color-secondary;
            background: none;
        }
    }

    #permissions-config {
        header.table-header {
            background: none;
            border: 1px solid $border-color-secondary;
            border-radius: 2px;
            padding-bottom: 4px;
        }

        li.permission {
            border-bottom: 1px solid $border-color-secondary;
        }

        p {
            &.hint {
                color: $text-color-secondary;
            }
        }

        .hint {
            color: $disabled;
        }
    }

    // Roll tables
    .roll-table-config ol.table-results {
        .table-header {
            border: none;
        }

        .table-result .result-controls .lock-result {
            color: $text-color-secondary;
        }

        .table-result.drawn .lock-result {
            color: $disabled;
        }
    }

    // Navigation
    #navigation {
        .nav-item {
            border: 1px solid transparent;
        }

        #nav-toggle {
            &:hover {
                text-shadow: 0 0 4px $glowColor;
            }
        }

        #scene-list {
            .scene.gm {
                @include thinBorder($highlight);
                background: $bg_content;
            }

            .scene-context,
            .scene.view {
                @include thinBorder($accent);
                background: $bg_content;
            }
        }
    }

    nav.list-filters a.filter {
        color: $disabled;
        border-bottom: 1px solid $disabled;
        text-shadow: none;
        transition: all 0.2s ease-in-out;

        &:hover {
            color: $white;
            border-bottom: 1px solid $disabled;
            box-shadow: none;
            transition: color 0.2s ease-in-out;
        }

        &.active {
            color: $accentSecondary;
            border-bottom: 1px solid $accentSecondary;
            box-shadow: none;
            transition: all 0.2s ease-in-out;
        }
    }

    #keybindings {
        .filters h3 {
            border-bottom: 1px solid transparent;
        }

        .action {
            border-bottom: 1px solid transparent;
        }

        .category {
            .category-header {
                border-bottom: 1px solid transparent;
            }
        }
    }
}
